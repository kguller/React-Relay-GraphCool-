"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var lodashMemoize = require("lodash/memoize");
function memoize(resolver) {
    return function (target, key, descriptor) {
        var functionToMemoize = descriptor.value;
        // prevents IE11 recursion error
        var definingProperty = false;
        // tslint:disable no-invalid-this
        return {
            configurable: true,
            get: function () {
                if (definingProperty || this === target.prototype || this.hasOwnProperty(key)) {
                    return functionToMemoize;
                }
                var boundFunction = lodashMemoize(functionToMemoize, resolver);
                definingProperty = true;
                Object.defineProperty(this, key, {
                    value: boundFunction,
                    configurable: true,
                    writable: true,
                });
                definingProperty = false;
                return boundFunction;
            },
        };
        // tslint:enable
    };
}
exports.default = memoize;
